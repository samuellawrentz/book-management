(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),a=n(15),s=n.n(a),i=(n(35),n(19)),r=n(3),d=n(1),l=function(e){var t=Object(r.g)();return Object(d.jsx)("header",{children:Object(d.jsx)("div",{className:"header container",children:Object(d.jsxs)("div",{className:"header flex",children:[Object(d.jsx)("h1",{onClick:function(){return t.push("/")},style:{cursor:"pointer"},children:"Book Management"}),Object(d.jsx)("div",{className:"action-buttons flex",children:Object(d.jsxs)("div",{className:"flex",children:[Object(d.jsx)("i",{className:"fa fa-search"}),Object(d.jsx)("input",{placeholder:"Search Books",type:"text",className:"search",value:e.searchTerm,onChange:function(t){return e.setSearchTerm(t.target.value)}})]})})]})})})},j=n(21),b=n(9),u=n(10),h=n(20),O=n(29),m=n(30),x="https://book-management-backend.herokuapp.com/",v=function(){function e(){Object(O.a)(this,e)}return Object(m.a)(e,null,[{key:"readBooks",value:function(){return fetch(x+"getbooks").then((function(e){return e.json()}))}},{key:"writeBooks",value:function(e){return fetch(x+"writebooks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:e})}}]),e}(),f={name:"New Book",author:"Myself",description:"This is a placeholder for a new book. Please add the details and submit to add the book to the database. Have a nice day!",count:1},p=Object(h.b)({name:"AppState",initialState:{books:[],selectedBook:null},reducers:{addBook:function(e,t){var n=e.books.findIndex((function(e){return e.name===t.payload.name}));-1!==n?e.books[n].count=(e.books[n].count||1)+1:e.books.push(t.payload),v.writeBooks(JSON.stringify(e.books))},udpateSelectedBook:function(e,t){e.selectedBook=t.payload},updateBooks:function(e,t){var n=e.books.filter((function(e){return e.name!==t.payload.oldName}));e.books=[].concat(Object(j.a)(n),[t.payload.newBook]),v.writeBooks(JSON.stringify(e.books))},setBooks:function(e,t){e.books=t.payload}}}),k=p.actions,N=k.addBook,y=k.udpateSelectedBook,B=k.updateBooks,w=k.setBooks,g=function(e){return e.books},C=function(e){return e.selectedBook},S=p.reducer,T=function(e){var t=Object(b.b)(),n=Object(b.c)(g),c=Object(j.a)(n).sort((function(e,t){return e.name.localeCompare(t.name)}));e.searchTerm&&(c=c.filter((function(t){return t.name.toLowerCase().startsWith(e.searchTerm.toLowerCase())})));var o=c.reduce((function(e,t){var n=t.name[0];return e[n]?e[n].books.push(t):e[n]={index:n,books:[t]},e}),{});return Object(d.jsxs)("div",{className:"list-holder",children:[Object(d.jsxs)("div",{className:"flex",children:[Object(d.jsx)("h2",{children:"List of Available books"}),Object(d.jsx)("div",{className:"action-holder",children:Object(d.jsx)(u.b,{to:"/add",className:"btn btn-outline",children:"Add Book"})})]}),Object(d.jsx)("div",{className:"books-list",children:Object.values(o).map((function(e){return Object(d.jsxs)("div",{className:"group-holder",children:[Object(d.jsx)("div",{className:"group-header",children:e.index}),Object(d.jsx)("div",{className:"books-holder",children:e.books.map((function(e){return Object(d.jsx)(u.b,{className:"book-holder",to:"/detail",onClick:function(){t(y(e))},children:Object(d.jsxs)("div",{className:"flex",children:[Object(d.jsx)("i",{className:"fa fa-book"}),Object(d.jsxs)("div",{className:"details",children:[Object(d.jsx)("div",{className:"book-name",children:e.name}),Object(d.jsx)("div",{className:"book-author",children:e.author})]})]})},e.name)}))})]})}))})]})},A=n(14),J=n(18),E=function(e){var t=Object(b.c)(C),n=Object(r.g)(),o=Object(b.b)(),a=e.type||"view",s="view"===a,l="edit"===a||"add"===a,j="add"===a?f:t,h=Object(c.useState)(j),O=Object(i.a)(h,2),m=O[0],x=O[1],v=function(e){var t=e.target,n=t.name;x(Object(J.a)({},n,t.value))};return Object(d.jsxs)("div",{className:"book-detail-holder "+a,children:[Object(d.jsx)("div",{children:Object(d.jsxs)("div",{className:"flex",children:[Object(d.jsx)("h2",{onClick:function(){return n.push("/list")},style:{cursor:"pointer"},children:Object(d.jsx)("i",{className:"fa fa-arrow-left back"})}),Object(d.jsx)("h2",{children:{view:"Book Details",edit:"Edit Book",add:"Add new Book"}[a]}),Object(d.jsxs)("div",{className:"action-holder flex",children:["view"===a&&Object(d.jsx)(u.b,{to:"/edit",className:"btn btn-outline",children:"Edit Book"}),l&&Object(d.jsx)("div",{className:"btn btn-outline",onClick:function(){"edit"===a&&x(t),n.push("add"===a?"/list":"/detail")},children:"Cancel"}),l&&Object(d.jsx)("div",{className:"btn btn-primary",onClick:"edit"===a?function(){var e=Object(A.a)(Object(A.a)({},t),m);o(B({oldName:null===t||void 0===t?void 0:t.name,newBook:e})),o(y(e)),n.push("/detail")}:function(){o(N(Object(A.a)(Object(A.a)({},f),m))),setTimeout((function(){return n.push("/list")}),1e3)},children:"edit"===a?"Done":"Add"})]})]})}),Object(d.jsxs)("div",{className:"detail-holder",children:[Object(d.jsxs)("div",{className:"title-desc flex",children:[Object(d.jsx)("i",{className:"fa fa-file-text"}),Object(d.jsxs)("div",{className:"title-author",children:[Object(d.jsx)("input",{className:"book-name",type:"text",value:null===m||void 0===m?void 0:m.name,readOnly:s,onChange:v,name:"name"}),Object(d.jsxs)("div",{children:["by ",Object(d.jsx)("input",{type:"text",value:null===m||void 0===m?void 0:m.author,name:"author",className:"author-input",readOnly:s,onChange:v})]})]})]}),Object(d.jsxs)("div",{className:"description",children:[Object(d.jsx)("strong",{children:"Description:"}),Object(d.jsx)("p",{children:Object(d.jsx)("textarea",{value:null===m||void 0===m?void 0:m.description,readOnly:s,rows:2,onChange:v,name:"description"})})]}),Object(d.jsxs)("div",{className:"count",children:[Object(d.jsx)("strong",{children:"No of Books:"}),Object(d.jsx)("p",{children:Object(d.jsx)("input",{type:"number",value:null===m||void 0===m?void 0:m.count,readOnly:s,onChange:v,name:"count"})})]})]})]})};var D=function(){var e=Object(c.useState)(),t=Object(i.a)(e,2),n=t[0],o=t[1],a=Object(b.b)();return Object(c.useEffect)((function(){v.readBooks().then((function(e){return a(w(JSON.parse(e)))}))}),[]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(l,{setSearchTerm:o,searchTerm:n}),Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"content-holder",children:Object(d.jsxs)(r.d,{children:[Object(d.jsx)(r.b,{path:"/list",render:function(){return Object(d.jsx)(T,{searchTerm:n})}}),Object(d.jsx)(r.b,{path:"/detail",component:E}),Object(d.jsx)(r.b,{path:"/edit",render:function(){return Object(d.jsx)(E,{type:"edit"})}}),Object(d.jsx)(r.b,{path:"/add",render:function(){return Object(d.jsx)(E,{type:"add"})}}),Object(d.jsx)(r.a,{to:"/list"})]})})})]})},L=Object(h.a)({reducer:S});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(b.a,{store:L,children:Object(d.jsx)(u.a,{children:Object(d.jsx)(D,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.f97b8713.chunk.js.map