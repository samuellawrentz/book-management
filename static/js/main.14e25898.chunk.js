(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),s=n(15),a=n.n(s),i=(n(35),n(14)),r=n(3),l=n(1),d=function(e){var t=Object(r.g)();return Object(l.jsx)("header",{children:Object(l.jsx)("div",{className:"header container",children:Object(l.jsxs)("div",{className:"header flex",children:[Object(l.jsx)("h1",{onClick:function(){return t.push("/")},style:{cursor:"pointer"},children:"Book Management"}),Object(l.jsx)("div",{className:"action-buttons flex",children:Object(l.jsxs)("div",{className:"flex",children:[Object(l.jsx)("i",{className:"fa fa-search"}),Object(l.jsx)("input",{placeholder:"Search Books",type:"text",className:"search",value:e.searchTerm,onChange:function(t){return e.setSearchTerm(t.target.value)}})]})})]})})})},j=n(20),b=n(7),u=n(10),h=n(19),O=n(29),m=n(30),x="https://book-management-backend.herokuapp.com/",f=function(){function e(){Object(O.a)(this,e)}return Object(m.a)(e,null,[{key:"readBooks",value:function(){return fetch(x+"getbooks").then((function(e){return e.json()}))}},{key:"writeBooks",value:function(e){return fetch(x+"writebooks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:e})}}]),e}(),p={name:"New Book",author:"Myself",description:"This is a placeholder for a new book. Please add the details and submit to add the book to the database. Have a nice day!",count:1},k=Object(h.b)({name:"AppState",initialState:{books:[],selectedBook:null},reducers:{addBook:function(e,t){var n=e.books.findIndex((function(e){return e.name===t.payload.name}));console.log(n,t.payload.name),-1!==n?e.books[n].count=(e.books[n].count||1)+1:e.books.push(t.payload),console.log(JSON.stringify(e.books)),f.writeBooks(JSON.stringify(e.books))},udpateSelectedBook:function(e,t){e.selectedBook=t.payload},updateBooks:function(e,t){var n=e.books.filter((function(e){return e.name!==t.payload.oldName}));e.books=[].concat(Object(j.a)(n),[t.payload.newBook]),f.writeBooks(JSON.stringify(e.books))},setBooks:function(e,t){e.books=t.payload},deleteBook:function(e,t){e.books=e.books.filter((function(e){return e.name!==t.payload.name})),f.writeBooks(JSON.stringify(e.books))}}}),v=k.actions,N=v.addBook,y=v.udpateSelectedBook,g=v.updateBooks,w=v.setBooks,B=v.deleteBook,S=function(e){return e.books},C=function(e){return e.selectedBook},T=k.reducer,A=function(){return Object(l.jsx)("div",{className:"blank",children:Object(l.jsxs)("div",{className:"blank-header",style:{maxWidth:700,margin:"0 auto",width:"100%",textAlign:"center",marginTop:"6rem"},children:[Object(l.jsx)("img",{src:"https://i.imgur.com/pKopwXp.gif",alt:"Loading"}),Object(l.jsx)("p",{style:{fontSize:24,fontWeight:300},children:"Please wait, the books are being transported from the API."})]})})},J=function(e){var t=Object(b.b)(),n=Object(b.c)(S),o=Object(j.a)(n).sort((function(e,t){return e.name.localeCompare(t.name)}));e.searchTerm&&(o=o.filter((function(t){return-1!==t.name.toLowerCase().indexOf(e.searchTerm.toLowerCase())})));var c=o.reduce((function(e,t){var n=t.name[0];return e[n]?e[n].books.push(t):e[n]={index:n,books:[t]},e}),{});return Object(l.jsxs)("div",{className:"list-holder",children:[Object(l.jsxs)("div",{className:"flex",children:[Object(l.jsx)("h2",{children:"List of Available books"}),Object(l.jsx)("div",{className:"action-holder",children:Object(l.jsx)(u.b,{to:"/add",className:"btn btn-outline",children:"Add Book"})})]}),Object(l.jsx)("div",{className:"books-list",children:e.loaded?Object.values(c).map((function(e){return Object(l.jsxs)("div",{className:"group-holder",children:[Object(l.jsx)("div",{className:"group-header",children:e.index}),Object(l.jsx)("div",{className:"books-holder",children:e.books.map((function(e){return Object(l.jsx)(u.b,{className:"book-holder",to:"/detail",onClick:function(){t(y(e))},children:Object(l.jsxs)("div",{className:"flex",children:[Object(l.jsx)("i",{className:"fa fa-book"}),Object(l.jsxs)("div",{className:"details",children:[Object(l.jsx)("div",{className:"book-name",children:e.name}),Object(l.jsx)("div",{className:"book-author",children:e.author})]})]})},e.name)}))})]})})):Object(l.jsx)(A,{})})]})},E=n(18),D=n(26),I=function(e){var t=Object(b.c)(C),n=Object(r.g)(),s=Object(b.b)(),a=c.a.useRef(document.createElement("textarea")),d=e.type||"view",j="view"===d,h="edit"===d||"add"===d,O="add"===d?p:t,m=Object(o.useState)(O),x=Object(i.a)(m,2),f=x[0],k=x[1],v=function(e){var t=e.target,n=t.name;k(Object(D.a)(Object(D.a)({},f),{},Object(E.a)({},n,t.value)))};return Object(o.useEffect)((function(){a.current.setAttribute("style","height:"+a.current.scrollHeight+"px;overflow-y:hidden;")}),[]),Object(l.jsxs)("div",{className:"book-detail-holder "+d,children:[Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"flex",children:[Object(l.jsx)("h2",{onClick:function(){return n.push("/list")},style:{cursor:"pointer"},children:Object(l.jsx)("i",{className:"fa fa-arrow-left back"})}),Object(l.jsx)("h2",{children:{view:"Book Details",edit:"Edit Book",add:"Add new Book"}[d]}),Object(l.jsxs)("div",{className:"action-holder flex",children:["view"===d&&Object(l.jsx)("div",{className:"btn btn-outline",onClick:function(){window.confirm("Are you sure? This action will delete this book.")&&(s(B(f)),n.push("/list"))},children:"Delete"}),"view"===d&&Object(l.jsx)(u.b,{to:"/edit",className:"btn btn-outline",children:"Edit"}),h&&Object(l.jsx)("div",{className:"btn btn-outline",onClick:function(){"edit"===d&&k(t),n.push("add"===d?"/list":"/detail")},children:"Cancel"}),h&&Object(l.jsx)("div",{className:"btn btn-primary",onClick:"edit"===d?function(){s(g({oldName:null===t||void 0===t?void 0:t.name,newBook:f})),s(y(f)),n.push("/detail")}:function(){s(N(f)),setTimeout((function(){return n.push("/list")}),1e3)},children:"edit"===d?"Done":"Add"})]})]})}),Object(l.jsxs)("div",{className:"detail-holder",children:[Object(l.jsxs)("div",{className:"title-desc flex",children:[Object(l.jsx)("i",{className:"fa fa-file-text"}),Object(l.jsxs)("div",{className:"title-author",children:[Object(l.jsx)("input",{className:"book-name",type:"text",value:null===f||void 0===f?void 0:f.name,readOnly:j,onChange:v,name:"name"}),Object(l.jsxs)("div",{children:["by ",Object(l.jsx)("input",{type:"text",value:null===f||void 0===f?void 0:f.author,name:"author",className:"author-input",readOnly:j,onChange:v})]})]})]}),Object(l.jsxs)("div",{className:"description",children:[Object(l.jsx)("strong",{children:"Description:"}),Object(l.jsx)("p",{children:Object(l.jsx)("textarea",{value:null===f||void 0===f?void 0:f.description,readOnly:j,rows:2,onChange:v,name:"description",ref:a,onInput:function(){a.current.style.height="auto",a.current.style.height=a.current.scrollHeight+"px"}})})]}),Object(l.jsxs)("div",{className:"count",children:[Object(l.jsx)("strong",{children:"No of Books:"}),Object(l.jsx)("p",{children:Object(l.jsx)("input",{type:"number",value:null===f||void 0===f?void 0:f.count,readOnly:j,onChange:v,name:"count"})})]})]})]})};var L=function(){var e=Object(o.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(b.b)(),a=Object(o.useState)(!1),j=Object(i.a)(a,2),u=j[0],h=j[1];return Object(o.useEffect)((function(){f.readBooks().then((function(e){s(w(JSON.parse(e))),setTimeout((function(){return h(!0)}),1e3)}))}),[]),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(d,{setSearchTerm:c,searchTerm:n}),Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("div",{className:"content-holder",children:Object(l.jsxs)(r.d,{children:[Object(l.jsx)(r.b,{path:"/list",render:function(){return Object(l.jsx)(J,{searchTerm:n,loaded:u})}}),Object(l.jsx)(r.b,{path:"/add",render:function(){return Object(l.jsx)(I,{type:"add"})}}),Object(b.c)(C)&&Object(l.jsx)(r.b,{path:"/detail",component:I}),Object(b.c)(C)&&Object(l.jsx)(r.b,{path:"/edit",render:function(){return Object(l.jsx)(I,{type:"edit"})}}),Object(l.jsx)(r.a,{to:"/list"})]})})})]})},P=Object(h.a)({reducer:T});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(b.a,{store:P,children:Object(l.jsx)(u.a,{children:Object(l.jsx)(L,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.14e25898.chunk.js.map